#!/bin/bash

[ -d .git ] || { echo "Not a git repository"; exit 1; }

# CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)
DEFAULT_BRANCH=$(git remote show origin | grep 'HEAD branch:' | cut -d ':' -f 2 | xargs)

git fetch --all --prune
git rebase origin/${DEFAULT_BRANCH} ${DEFAULT_BRANCH}

# git checkout "${DEFAULT_BRANCH}"
# git pull --rebase origin "${DEFAULT_BRANCH}" --autostash

# [ "${CURRENT_BRANCH}" == "${DEFAULT_BRANCH}" ] && exit 0

# if [ $(git branch --merged | grep -c "${CURRENT_BRANCH}") -eq 1 ]; then
#     git branch -d "${CURRENT_BRANCH}"
# else
#     git checkout "${CURRENT_BRANCH}"
# fi